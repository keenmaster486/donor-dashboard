(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),o=n(9),c=n.n(o),r=(n(15),n(10)),i=n(1),l=n.n(i),d=n(3),u=n(4),h=n(5),j=n(7),p=n(6),b=(n(17),n(18),n(0)),O=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).onDonationsClick=function(t){e.props.changeState({menuOption:"Donations"})},e.onAboutClick=function(t){e.props.changeState({menuOption:"About"})},e.state={},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"navBarContainer",children:[Object(b.jsx)("span",{className:"navBarTitle",children:"Donor Dashboard"}),Object(b.jsx)("div",{className:"menuItem",onClick:this.onDonationsClick,children:"Donations"}),Object(b.jsx)("div",{className:"menuItem",onClick:this.onAboutClick,children:"About"})]})}}]),n}(a.Component),x=(n(20),function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"aboutContainer",children:"About information"})}}]),n}(a.Component)),m=(n(21),function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).getDonations=Object(d.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.props.appState.apiURL+"/donation/all",{method:"GET",headers:e.props.appState.defaultHeaders});case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.t0=e,t.next=9,a;case 9:t.t1=t.sent,t.t2={donations:t.t1},t.t0.setState.call(t.t0,t.t2);case 12:case"end":return t.stop()}}),t)}))),e.onFileChange=function(t){console.log(t.target.files[0]),e.setState({file:t.target.files[0]})},e.onDelete=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.props.appState.apiURL+"/donation/deleteAll",{method:"POST",headers:e.props.appState.defaultHeaders});case 2:e.getDonations();case 3:case"end":return t.stop()}}),t)}))),e.onFilterAnon=function(t){e.setState({filterAnon:!!t.target.checked})},e.onUpload=Object(d.a)(l.a.mark((function t(){var n,a,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.file){t.next=2;break}return t.abrupt("return");case 2:return t.t0=e,t.next=5,e.state.file.text();case 5:return t.t1=t.sent,t.next=8,t.t0.parseCsv.call(t.t0,t.t1);case 8:return n=t.sent,t.t2=fetch,t.t3=e.props.appState.apiURL+"/donation/uploadBatch",t.next=13,JSON.stringify(n);case 13:return t.t4=t.sent,t.t5=e.props.appState.defaultHeaders,t.t6={method:"POST",body:t.t4,headers:t.t5},t.next=18,(0,t.t2)(t.t3,t.t6);case 18:return a=t.sent,t.next=21,a.json();case 21:(s=t.sent).totalItems&&(e.setState({uploaded:s}),e.getDonations());case 23:case"end":return t.stop()}}),t)}))),e.parseCsv=function(e){var t=e.split("\n"),n=t[0].split(",");return t.splice(0,1),t=(t=t.map((function(e){for(var t=e.split(","),a={},s=0;s<n.length;s++)a[n[s]]=t[s];return a}))).filter((function(e){return e[n[0]]&&""!==e[n[0]]}))},e.state={file:null,donations:[],filterAnon:!1},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getDonations()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"donationsContainer",children:[Object(b.jsx)("div",{className:"donationsHeader",children:"Donations"}),Object(b.jsx)("div",{className:"sectionRow",children:Object(b.jsxs)("div",{className:"statRow",children:["Total Donation Value: ",this.state.donations.reduce((function(e,t){return e+t.amount}),0)]})}),Object(b.jsxs)("div",{className:"sectionRow",children:[Object(b.jsx)("div",{children:"CSV file uploader"}),Object(b.jsx)("input",{type:"file",onChange:this.onFileChange}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{onClick:this.onUpload,children:"Upload this file"})]}),this.props.appState.debug?Object(b.jsx)("div",{className:"sectionRow",children:Object(b.jsx)("button",{onClick:this.onDelete,children:"Delete all donation records (debug)"})}):null,Object(b.jsxs)("div",{className:"sectionRow",children:[Object(b.jsx)("input",{type:"checkbox",onChange:this.onFilterAnon})," Filter anonymous donors"]}),this.state.uploaded?Object(b.jsxs)("div",{className:"sectionRow afterUpload",children:["CSV successfully uploaded. Stats from this file:",Object(b.jsxs)("div",{className:"statRow",children:["Total Items: ",this.state.uploaded.totalItems]}),Object(b.jsxs)("div",{className:"statRow",children:["Total Value: ",this.state.uploaded.totalValue]}),Object(b.jsxs)("div",{className:"statRow",children:["Percentage anonymous donors: ",this.state.uploaded.percentageAnon,"%"]})]}):null,Object(b.jsx)("div",{className:"donationsTableContainer",children:Object(b.jsxs)("table",{border:"1",className:"donationsTable",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"rowLabel"}),Object(b.jsx)("td",{children:"Donor ID"}),Object(b.jsx)("td",{children:"Donor Name"}),Object(b.jsx)("td",{children:"Donor Email"}),Object(b.jsx)("td",{children:"Donor Gender"}),Object(b.jsx)("td",{children:"Donor Address"}),Object(b.jsx)("td",{children:"Donation Amount"})]})}),Object(b.jsx)("tbody",{children:this.state.donations?this.state.donations.filter((function(t){return!e.state.filterAnon||!!t.name})).map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t+1}),Object(b.jsx)("td",{children:e.id}),Object(b.jsx)("td",{children:e.name||"Anonymous"}),Object(b.jsx)("td",{children:e.email||"Anonymous"}),Object(b.jsx)("td",{children:e.gender||"Anonymous"}),Object(b.jsx)("td",{children:e.address||"Anonymous"}),Object(b.jsxs)("td",{children:["$",e.amount]})]},t)})):null})]})})]})}}]),n}(a.Component)),f=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).getApiStatus=Object(d.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.state.apiURL+"/status",{method:"GET",headers:e.state.defaultHeaders});case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.t0=e,t.next=9,a.status;case 9:t.t1=t.sent,t.t2={apiStatus:t.t1},t.t0.setState.call(t.t0,t.t2);case 12:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){t.preventDefault(),e.setState(Object(r.a)({},t.currentTarget.name,t.currentTarget.value))},e.changeState=function(t,n){e.setState(t)},e.onDebug=function(t){e.setState({debug:!!t.target.checked})},e.onLogout=Object(d.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.state.apiUrl+"/auth/logout",{method:"POST",headers:e.state.defaultHeaders});case 2:return n=t.sent,t.next=5,n.json();case 5:(a=t.sent).success?e.setState({loggedIn:!1}):a.message&&alert(a.message);case 7:case"end":return t.stop()}}),t)}))),e.onLogin=Object(d.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.state.apiURL+"/auth/login",{method:"POST",body:JSON.stringify({email:e.state.email,password:e.state.password}),headers:e.state.defaultHeaders});case 2:return n=t.sent,t.next=5,n.json();case 5:(a=t.sent).success?(e.setState({loggedIn:!0,sessionId:a.sessionId,defaultHeaders:{"Content-Type":"application/json","Cache-Control":"max-age=0",authentication:a.sessionId}}),console.log(a)):a.message&&alert(a.message);case 7:case"end":return t.stop()}}),t)}))),e.onCreateAccount=Object(d.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.state.apiURL+"/user",{method:"POST",body:JSON.stringify({email:e.state.createEmail,password:e.state.createPass,password2:e.state.createPass2}),headers:e.state.defaultHeaders});case 2:return n=t.sent,t.next=5,n.json();case 5:(a=t.sent).success?(e.setState({email:e.state.createEmail,password:e.state.createPass}),e.onLogin()):a.message&&alert(a.message);case 7:case"end":return t.stop()}}),t)}))),e.state={apiURL:"",apiStatus:"",menuOption:"Donations",defaultHeaders:{"Content-Type":"application/json","Cache-Control":"max-age=0"},debug:!1,loggedIn:!1,email:"",password:"",createEmail:"",createPass:"",createPass2:"",sessionId:""},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getApiStatus()}},{key:"render",value:function(){return Object(b.jsx)("div",{className:"App",children:this.state.loggedIn?Object(b.jsxs)("div",{children:[Object(b.jsx)(O,{changeState:this.changeState,appState:this.state}),"Donations"===this.state.menuOption?Object(b.jsx)(m,{changeState:this.changeState,appState:this.state}):null,"About"===this.state.menuOption?Object(b.jsx)(x,{changeState:this.changeState,appState:this.state}):null,Object(b.jsxs)("div",{align:"center",className:"footer",children:["Welcome ",this.state.email,"Api ",this.state.apiStatus,Object(b.jsx)("input",{type:"checkbox",onChange:this.onDebug})," Debug mode",Object(b.jsx)("button",{onClick:this.onLogout,children:"Log Out"})]})]}):Object(b.jsxs)("div",{children:["Log In",Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",name:"email",placeholder:"Email",onChange:this.handleChange}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleChange}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{onClick:this.onLogin,children:"Log In"}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"Create Account",Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",name:"createEmail",placeholder:"Email",onChange:this.handleChange}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"password",name:"createPass",placeholder:"Password",onChange:this.handleChange}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"password",name:"createPass2",placeholder:"Retype Password",onChange:this.handleChange}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{onClick:this.onCreateAccount,children:"Create Account"}),Object(b.jsx)("br",{})]})})}}]),n}(a.Component),g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),o(e),c(e)}))};c.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(f,{})}),document.getElementById("root")),g()}],[[22,1,2]]]);
//# sourceMappingURL=main.ab8cca0d.chunk.js.map